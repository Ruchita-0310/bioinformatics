source /bio/bin/python-env/bin/activate

source /bio/bin/profile

git clone https://github.com/kinestetika/ComparativeGenomics.git

cd ComparativeGenomics/

python -m build

pip install --upgrade dist/comparative_genomics-0.1.tar.gz

#output directory for orthologs 
mkdir /bio/data/Ruchita/phormidium/output 

#orthologs command line (remove all the non .faa files)
orthologues --input_dir /bio/data/Ruchita/phormidium --output_dir /bio/data/Ruchita/phormidium/output 

#tree of mags
tree_of_mags –dir input directory

#FastTree
FastTree inputdir/file.name > fasttree_file

#installing checkM2
pip install checkm2

#downloading database for checkm2
checkm2 database –download

#command
checkm2 predict -t 30 -x fna --input ./cyano-fna --output-directory ./checkm2-output2/ (make an output directory)

#activate the path
source /bio/bin/checkm2/bin/activate
export LD_LIBRARY_PATH=/bio/bin/lib:/bio/bin/python38/pkg/python38/usr/lib  (command to remove error)

#metaerg 
/bio/bin/python-env/bin/metaerg --contig_file /bio/data/Ruchita/cyano-fna --database_dir /bio/databases/metaerg 

#Installing CheckM2
1.	Install python 3.8 (https://aur.archlinux.org/packages/python38):
cd /bio/bin
git clone https://aur.archlinux.org/python38.git
cd python38
makepkg

2.	Installing virtual env:
pip install virtualenv

3.	Installing checkm2 in the virtualenv: 
virtualenv --python=/bio/bin/python38/pkg/python38/usr/bin/python3.8 checkm2

4.	Update library path:
export LD_LIBRARY_PATH=/bio/bin/lib:/bio/bin/python38/pkg/python38/usr/lib

5.	Activating checkm2 pathway:
source /bio/bin/checkm2/bin/activate

6.	installing checkm2:
pip install checkm2

7.	Download checkm2 database:
checkm2 database –download

8.	Checkm2 command:
checkm2 predict -t 30 -x fna --input ./directory_name.fna --output-directory output_directory_name

#iqtree - species tree
nohup iqtree2 -s /bio/data/Ruchita/faa/alignments/concatenated_alignment
# IQ-TREE supports a wide range of evolutionary models
All common substitution models for DNA, protein, codon, binary and morphological data with rate heterogeneity among sites.

# Iqtree2 – gene tree | run it in loop
nohup sh -c 'for file in /bio/data/Ruchita/faa/orthologous/msa_clustalo/*aln; do iqtree2 -s "$file" -m MFP -madd LG+C20,LG+C60 -B 10000 -wbtl ; done' &

# Clustalo (MSA)multiple sequence alignment | run it in loop 
for file in /bio/data/Ruchita/faa/orthologous/*.faa; do nohup clustalo -i "$file" -o /bio/data/Ruchita/faa/orthologous/msa_clustalo"$(basename "$file" .faa)".aln > "$(basename "$file" .faa)".log & done

# ALE observe | run it in loop
nohup sh -c 'for file in /bio/data/Ruchita/ale1 /*.ufboot; do ALEobserve $file; done' &

# ALE_undated | run it in parallel or loop
parallel -j 100000 "ALEml_undated reroot_newick.txt {} separators='|'" ::: *.ale
-	You can adjust the number of parallel jobs by adding the "-j" flag followed by the number of parallel jobs you want to run
-	nohup parallel -j 1500 “ALEml_undated reroot_newick.txt {} separators=‘|'” ::: *.ale &
